<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SportExtract - Ekstraksi Informasi Berita Olahraga</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.37);
            border: 1px solid rgba(255, 255, 255, 0.18);
        }

        .header h1 {
            color: white;
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 700;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            color: rgba(255, 255, 255, 0.9);
            font-size: 1.1rem;
            margin-bottom: 20px;
        }

        .badge {
            display: inline-block;
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .input-section, .output-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 20px;
            color: #2c3e50;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-title::before {
            content: '';
            width: 4px;
            height: 30px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            border-radius: 2px;
        }

        .input-tabs {
            display: flex;
            margin-bottom: 20px;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .tab-button {
            flex: 1;
            padding: 12px;
            background: #f8f9fa;
            border: none;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            color: #6c757d;
        }

        .tab-button.active {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
        }

        .tab-button:hover:not(.active) {
            background: #e9ecef;
        }

        .input-area {
            margin-bottom: 20px;
        }

        .input-area textarea, .input-area input[type="url"] {
            width: 100%;
            min-height: 200px;
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 1rem;
            font-family: inherit;
            resize: vertical;
            transition: all 0.3s ease;
        }

        .input-area input[type="url"] {
            min-height: auto;
            height: 50px;
        }

        .input-area textarea:focus, .input-area input[type="url"]:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .extract-button {
            width: 100%;
            padding: 15px;
            background: linear-gradient(45deg, #28a745, #20c997);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .extract-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(40, 167, 69, 0.4);
        }

        .extract-button:active {
            transform: translateY(0);
        }

        .w5h1-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .w5h1-item {
            background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
            border-radius: 12px;
            padding: 20px;
            border-left: 5px solid;
            transition: all 0.3s ease;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .w5h1-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .w5h1-item.who { border-left-color: #e74c3c; }
        .w5h1-item.what { border-left-color: #3498db; }
        .w5h1-item.when { border-left-color: #f39c12; }
        .w5h1-item.where { border-left-color: #2ecc71; }
        .w5h1-item.why { border-left-color: #9b59b6; }
        .w5h1-item.how { border-left-color: #1abc9c; }

        .w5h1-label {
            font-weight: 700;
            font-size: 1.1rem;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .w5h1-item.who .w5h1-label { color: #e74c3c; }
        .w5h1-item.what .w5h1-label { color: #3498db; }
        .w5h1-item.when .w5h1-label { color: #f39c12; }
        .w5h1-item.where .w5h1-label { color: #2ecc71; }
        .w5h1-item.why .w5h1-label { color: #9b59b6; }
        .w5h1-item.how .w5h1-label { color: #1abc9c; }

        .w5h1-content {
            color: #2c3e50;
            line-height: 1.6;
            min-height: 40px;
            font-size: 0.95rem;
        }

        .entity {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 4px 8px;
            border-radius: 15px;
            font-weight: 600;
            font-size: 0.85rem;
            margin: 2px;
            display: inline-block;
            box-shadow: 0 2px 5px rgba(102, 126, 234, 0.3);
        }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
            color: #6c757d;
        }

        .loading.show {
            display: block;
        }

        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .footer {
            text-align: center;
            color: rgba(255, 255, 255, 0.8);
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .w5h1-container {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2rem;
            }
        }

        .sample-data {
            margin-top: 15px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 1px solid #dee2e6;
        }

        .sample-data h4 {
            margin-bottom: 10px;
            color: #495057;
            font-size: 0.9rem;
        }

        .sample-links {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .sample-link {
            color: #667eea;
            text-decoration: none;
            font-size: 0.85rem;
            padding: 5px;
            border-radius: 4px;
            transition: all 0.2s;
        }

        .sample-link:hover {
            background: #667eea;
            color: white;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üèÜ SportExtract</h1>
            <p>Sistem Ekstraksi Informasi Berita Olahraga Menggunakan IndoBERT</p>
            <span class="badge">5W1H Extraction</span>
        </div>

        <div class="main-content">
            <div class="input-section">
                <h2 class="section-title">üìù Input Berita</h2>
                
                <div class="input-tabs">
                    <button class="tab-button active" onclick="switchTab('text')">Teks Berita</button>
                    <button class="tab-button" onclick="switchTab('url')">URL Berita</button>
                </div>

                <div id="text-tab" class="tab-content active">
                    <div class="input-area">
                        <textarea id="text-input" placeholder="Masukkan teks berita olahraga di sini...

Contoh:
Lionel Messi mencetak gol spektakuler pada pertandingan Barcelona vs Real Madrid di Stadion Camp Nou kemarin malam. Pemain asal Argentina berusia 36 tahun ini berhasil mengalahkan kiper Thibaut Courtois dengan tendangan kaki kiri yang menawan. Gol tersebut menjadi gol ke-15 Messi di La Liga musim ini."></textarea>
                    </div>
                </div>

                <div id="url-tab" class="tab-content">
                    <div class="input-area">
                        <input type="url" id="url-input" placeholder="https://sport.detik.com/sepakbola/...">
                        <div class="sample-data">
                            <h4>üîó Contoh URL yang Didukung:</h4>
                            <div class="sample-links">
                                <a href="#" class="sample-link" onclick="fillSampleUrl('detik')">DetikSport - Berita Sepakbola</a>
                                <a href="#" class="sample-link" onclick="fillSampleUrl('kompas')">Kompas.com - Berita Basket</a>
                                <a href="#" class="sample-link" onclick="fillSampleUrl('bolasport')">BolaSport - Berita Badminton</a>
                            </div>
                        </div>
                    </div>
                </div>

                <button class="extract-button" onclick="extractInformation()">
                    üöÄ Ekstrak Informasi
                </button>
            </div>

            <div class="output-section">
                <h2 class="section-title">üìä Hasil Ekstraksi 5W1H</h2>
                
                <div class="loading" id="loading">
                    <div class="spinner"></div>
                    <p>Sedang mengekstrak informasi...</p>
                </div>

                <div id="results" class="w5h1-container">
                    <div class="w5h1-item who">
                        <div class="w5h1-label">WHO (Siapa)</div>
                        <div class="w5h1-content" id="who-content">
                            Klik "Ekstrak Informasi" untuk melihat hasil
                        </div>
                    </div>

                    <div class="w5h1-item what">
                        <div class="w5h1-label">WHAT (Apa)</div>
                        <div class="w5h1-content" id="what-content">
                            Klik "Ekstrak Informasi" untuk melihat hasil
                        </div>
                    </div>

                    <div class="w5h1-item when">
                        <div class="w5h1-label">WHEN (Kapan)</div>
                        <div class="w5h1-content" id="when-content">
                            Klik "Ekstrak Informasi" untuk melihat hasil
                        </div>
                    </div>

                    <div class="w5h1-item where">
                        <div class="w5h1-label">WHERE (Dimana)</div>
                        <div class="w5h1-content" id="where-content">
                            Klik "Ekstrak Informasi" untuk melihat hasil
                        </div>
                    </div>

                    <div class="w5h1-item why">
                        <div class="w5h1-label">WHY (Mengapa)</div>
                        <div class="w5h1-content" id="why-content">
                            Klik "Ekstrak Informasi" untuk melihat hasil
                        </div>
                    </div>

                    <div class="w5h1-item how">
                        <div class="w5h1-label">HOW (Bagaimana)</div>
                        <div class="w5h1-content" id="how-content">
                            Klik "Ekstrak Informasi" untuk melihat hasil
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="footer">
            <p>Dikembangkan oleh <strong>George Wielianto (535220090)</strong> | Program Studi Teknik Informatika<br>
            Fakultas Teknologi Informasi - Universitas Tarumanagara</p>
        </div>
    </div>

    <script>
        function switchTab(tabName) {
            // Reset all tabs
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });

            // Activate selected tab
            document.querySelector(`button[onclick="switchTab('${tabName}')"]`).classList.add('active');
            document.getElementById(`${tabName}-tab`).classList.add('active');
        }

        function fillSampleUrl(source) {
            const sampleUrls = {
                'detik': 'https://sport.detik.com/sepakbola/d-7123456/messi-cetak-gol-spektakuler-di-el-clasico',
                'kompas': 'https://www.kompas.com/sports/read/2024/01/15/basket-indonesia-menang',
                'bolasport': 'https://www.bolasport.com/read/badminton/anthony-ginting-juara'
            };
            
            document.getElementById('url-input').value = sampleUrls[source];
        }

        function extractInformation() {
            const activeTab = document.querySelector('.tab-button.active').textContent.includes('Teks') ? 'text' : 'url';
            let input = '';

            if (activeTab === 'text') {
                input = document.getElementById('text-input').value.trim();
            } else {
                input = document.getElementById('url-input').value.trim();
            }

            if (!input) {
                alert('Mohon masukkan teks berita atau URL terlebih dahulu!');
                return;
            }

            // Show loading
            document.getElementById('loading').classList.add('show');
            document.getElementById('results').style.opacity = '0.3';

            // Call actual API
            callNERAPI(input);
        }

        async function callNERAPI(text) {
            try {
                const response = await fetch('/api/extract', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ text: text })
                });

                const data = await response.json();

                if (data.success) {
                    displayResults(data.w5h1, data.entities, data.stats);
                } else {
                    throw new Error(data.error || 'Unknown error occurred');
                }
            } catch (error) {
                console.error('Error calling API:', error);
                alert('Terjadi kesalahan saat memproses teks. Silakan coba lagi.');
                // Hide loading on error
                document.getElementById('loading').classList.remove('show');
                document.getElementById('results').style.opacity = '1';
            }
        }

        function displayResults(w5h1Data, entities, stats) {
            // Hide loading
            document.getElementById('loading').classList.remove('show');
            document.getElementById('results').style.opacity = '1';

            // Update 5W1H results
            Object.keys(w5h1Data).forEach(key => {
                const content = w5h1Data[key].map(entity => 
                    `<span class="entity">${entity}</span>`
                ).join(' ');
                
                const element = document.getElementById(`${key}-content`);
                if (element) {
                    element.innerHTML = content || 'Tidak ada informasi yang ditemukan';
                }
            });

            // Add animation effect
            document.querySelectorAll('.w5h1-item').forEach((item, index) => {
                setTimeout(() => {
                    item.style.animation = 'none';
                    item.style.animation = 'pulse 0.6s ease-in-out';
                }, index * 100);
            });

            // Log stats to console
            console.log('Extraction Stats:', stats);
            console.log('Raw Entities:', entities);
        }


        // Add pulse animation
        const style = document.createElement('style');
        style.textContent = `
            @keyframes pulse {
                0% { transform: scale(1); }
                50% { transform: scale(1.05); }
                100% { transform: scale(1); }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>